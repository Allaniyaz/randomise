<!DOCTYPE html>
<html>
<head>
	<title>Тосынарлы белгилер</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/sweetalert/sweetalert2.min.css">
	<script type="text/javascript" src="js/jquery/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="js/bootstrap/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/sweetalert/sweetalert2.all.min.js"></script>
</head>
<body>
<div class="container">
	<div class="row">
		<div class="col-md-4">
			<h2 class="">Белгилер</h2>		
			<div class="div-form">
				<div class="input-group">
					<textarea name="text" id="text" cols="30" rows="10" class="form-contol"></textarea>
				</div><br>
				<div class="input-group">
					<button type="button" class="form-contol btn btn-primary" onclick="alertShow()">Старт</button>
				</div>
			</div>
		</div>
		<div class="col-md-8" id="div-big">
			<h2 class="">Тосынарлы белгилер</h2>		
			<div class="div-form div-rand">

			</div>
		</div>	
	</div>
</div>
	
<script type="text/javascript">
	function alertShow()
	{
swal.queue([{
  title: 'Count of randoise symbols',
  //html: "<input type='number' class='form-contol'>",
  input: 'number',
  inputAttributes: {'min': 1, 'id': 'count',},
  confirmButtonText: 'Randomise',
  text:
    'Randomise text ' +
    'via AJAX request',
  showLoaderOnConfirm: true,
  preConfirm: function (number) {
    return new Promise(function (resolve) {
        
        setTimeout(function () {
		var text = $('#text').val();
		var arr = text.split("\n");        	
    	var randNums;
				var n = arr.length;
				var randText = '';
				for(var j=1; j<=parseInt(number); j++) {
					findWinner();	
					$('.div-rand').append("<br><div class='input-group' id='input-group"+j+"'>");
						$('.div-rand').append("<label>+998</label>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"1' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"2' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"3' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"4' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"5' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"6' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"7' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"8' min='0' max='9' width='10'>");
						$('.div-rand').append("<input type='number' class='digit' id='digit"+j+"9' min='0' max='9' width='10'>");
					$('.div-rand').append("</div><br><br>");
				}

				function findWinner() {
					n = arr.length;
					var i = Math.floor(Math.random() * Math.floor(n));
					randText += arr[i]+"\n";
					console.log(arr[i]+" - "+i);
					arr.splice(i,1);
				}
				randNums = randText.split("\n");
				randNums.splice(randNums.length-1,1);
				alert(randNums.length);
				for(var k = 0; k < randNums.length; k++) {
					var arrNew = randNums[k].split('');
					alert(arrNew.length);
					for(var l = 0; l < 9; l++) {
						$('#digit'+(k+1)+''+(l+1)).val(arrNew[parseInt(l)]);
					}
				}
				swal.insertQueueStep(randText);     
    	resolve()
    	},2000)
    })
  }
}])

	}		
</script>

</body>
</html>