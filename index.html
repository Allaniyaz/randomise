<!DOCTYPE html>
<html>
<head>
	<title>Тосынарлы белгилер</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/sweetalert/sweetalert2.min.css">
	<script type="text/javascript" src="js/jquery/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="js/bootstrap/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/sweetalert/sweetalert2.all.min.js"></script>
</head>
<body>
<div class="container">
	<div class="row">
		<div class="col-md-12">
			<h2 class="">Тосынарлы белгилер</h2>		
			<div class="div-form">
				<div class="input-group">
					<textarea name="text" id="text" cols="30" rows="10" class="form-contol"></textarea>
				</div><br>
				<div class="input-group">
					<button type="button" class="form-contol btn btn-primary" onclick="alertShow()">Старт</button>
				</div>
			</div>
		</div>
	</div>
</div>
	
<script type="text/javascript">
	function alertShow()
	{
swal.queue([{
  title: 'Count of randoise symbols',
  //html: "<input type='number' class='form-contol'>",
  input: 'number',
  inputAttributes: {'min': 1, 'id': 'count',},
  confirmButtonText: 'Randomise',
  text:
    'Randomise text ' +
    'via AJAX request',
  showLoaderOnConfirm: true,
  preConfirm: function (number) {
    return new Promise(function (resolve) {
        
        setTimeout(function () {
		var text = $('#text').val();
		var arr = text.split("\n");        	
    	
				var n = arr.length;
				var randText = '';
				for(var j=1; j<=parseInt(number); j++)
					findWinner();

				function findWinner() {
					n = arr.length;
					var i = Math.floor(Math.random() * Math.floor(n));
					randText += arr[i]+"\n";
					console.log(arr[i]+" - "+i);
					arr.splice(i,1);
				}
				swal.insertQueueStep(randText);     
    	resolve()
    	},2000)
    })
  }
}])

	}		
</script>
</body>
</html>